(this["webpackJsonpdemo-context-api"]=this["webpackJsonpdemo-context-api"]||[]).push([[0],{152:function(e,t,n){e.exports=n(301)},157:function(e,t,n){},158:function(e,t,n){},159:function(e,t,n){},160:function(e,t,n){},185:function(e,t){},187:function(e,t){},201:function(e,t){},203:function(e,t){},231:function(e,t){},233:function(e,t){},234:function(e,t){},239:function(e,t){},241:function(e,t){},247:function(e,t){},249:function(e,t){},268:function(e,t){},280:function(e,t){},283:function(e,t){},300:function(e,t,n){},301:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(28),l=n.n(o),r=n(36),i=(n(75),n(7)),u=(n(157),n(158),n(151)),s=n(46),m=n(74),f=function(e){var t=Object(a.useState)({}),n=Object(i.a)(t,2),c=n[0],o=n[1];return[function(e){o(Object(m.a)(Object(m.a)({},c),{},Object(s.a)({},e.target.name,e.target.value)))},function(t){t.preventDefault(),t.target.reset(),e(c),o(c)}]},d=(n(159),function(e){var t=f((function(t){e.handleSubmit(t)})),n=Object(i.a)(t,2),a=n[0],o=n[1];return c.a.createElement("div",{className:"form"},c.a.createElement("h3",null,"Add Item"),c.a.createElement("form",{onSubmit:o},c.a.createElement("label",{"data-testid":"todoItem-all"},c.a.createElement("span",null,"To Do Item"),c.a.createElement("input",{name:"text",placeholder:"Add To Do List Item",onChange:a,"data-testid":"todoItem"})),c.a.createElement("label",null,c.a.createElement("span",null,"Difficulty Rating"),c.a.createElement("input",{defaultValue:"1",type:"range",min:"1",max:"5",name:"difficulty",onChange:a,"data-testid":"difficulty"})),c.a.createElement("label",null,c.a.createElement("span",null,"Assigned To"),c.a.createElement("input",{type:"text",name:"assignee",placeholder:"Assigned To",onChange:a,"data-testid":"assignee"})),c.a.createElement(u.a,{type:"submit","data-testid":"submit",variant:"primary"},"Add Item")," "))}),p=(n(160),n(145)),h=n(146),E=n(150),v=n(148),b=c.a.createContext(),g=function(e){Object(E.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={maxItems:4,sortMethod:"assignee",hideCompleted:!0},a}return Object(h.a)(n,[{key:"render",value:function(){return c.a.createElement(b.Provider,{value:this.state},this.props.children)}}]),n}(c.a.Component),j=function(e){var t=Object(a.useState)([]),n=Object(i.a)(t,2),o=n[0],l=n[1],r=Object(a.useState)([]),u=Object(i.a)(r,2),s=u[0],m=u[1],f=Object(a.useContext)(b),d=e.list.slice(0,f.maxItems),p=function(t){var n=t.target.name,a=e.list.slice((n-1)*f.maxItems,f.maxItems+(n-1)*f.maxItems);l(a)};return Object(a.useEffect)((function(){for(var t=[],n=Math.ceil(e.list.length/f.maxItems),a=1;a<=n;a++)t.push(c.a.createElement("button",{key:a,name:a,onClick:p},"Page ",a));m([t])}),[e]),Object(a.useEffect)((function(){l(d)}),[e]),c.a.createElement(c.a.Fragment,null,c.a.createElement("ul",{className:"list-li"},o.map((function(t){return c.a.createElement("li",{className:"complete-".concat(t.complete.toString()),key:t._id},c.a.createElement("span",{onClick:function(){return e.handleComplete(t._id)}},c.a.createElement("h5",null,"For: ",t.assignee),c.a.createElement("h6",null,"Task: ",t.text),c.a.createElement("h6",null,"Difficulty: ",t.difficulty)),c.a.createElement("button",{onClick:function(){return e.delete(t._id)}},"[X]"),c.a.createElement("button",{onClick:function(){return e.edit(t._id)}},"[Edit]"))}))),c.a.createElement("div",null,s))},O=n(149),x=n(47),y=n.n(x),C=n(34).default,I="http://localhost:3001",S=y.a.load("auth");C.defaults.headers.common.Authorization="Bearer ".concat(S);var k=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],o=function(){C.get("".concat(I,"/api/v2/todo/")).then((function(e){c(e.data)})).catch(console.error)};return[n,function(e){e.due=new Date,C.post("".concat(I,"/api/v2/todo"),{text:e.text,assignee:e.assignee,difficulty:e.difficulty}).then((function(e){var t=e.data;c([].concat(Object(O.a)(n),[t]))})).catch((function(e){console.log("Add-item error:",e)}))},function(e){var t=n.filter((function(t){return t._id===e}))[0]||{};if(t._id){t.complete=!t.complete;var a="".concat(I,"/api/v2/todo/").concat(e);C.put(a,{complete:t.complete}).then((function(e){c(n.map((function(n){return n._id===t._id?e.data:n})))})).catch(console.error)}},function(e){if((n.filter((function(t){return t._id===e}))[0]||{})._id){var t="".concat(I,"/api/v2/todo/").concat(e);C.delete(t).then((function(e){return console.log({response:e})})).then((function(){return o()})).catch(console.error)}},o]},_=function(){var e=k(),t=Object(i.a)(e,5),n=t[0],o=t[1],l=t[2],u=t[3],s=t[4];return Object(a.useEffect)(s,[]),Object(a.useEffect)((function(){document.title="To-do List: ".concat(n.filter((function(e){return!e.complete})).length)})),console.log("LIST:",n),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,c.a.createElement("header",{className:"todo-header"},c.a.createElement(r.a,{variant:"light",expand:"lg",sticky:"top",className:"nav-color-todo"},c.a.createElement("h2",null,"To-do List Manager (",n.filter((function(e){return!e.complete})).length,")"))),c.a.createElement("section",{className:"todo"},c.a.createElement("div",null,c.a.createElement(d,{handleSubmit:o})),c.a.createElement("div",null,c.a.createElement(j,{list:n,handleComplete:l,delete:u})))))},A=n(34),T=n.n(A),w=c.a.createContext();var D=function(e){var t=Object(a.useState)({}),n=Object(i.a)(t,2),o=n[0],l=n[1],r={user:o,signUp:function(e,t,n){T.a.post("".concat("http://localhost:3001","/signup"),{username:e,password:t,role:n}).then((function(e){var t=e.data;l([o,t])})).catch((function(e){console.log("Sign-up error:",e)}))}};return c.a.createElement(w.Provider,{value:r},e.children)},N=n(147),B=n.n(N);console.log({API:"http://localhost:3001"});var P=c.a.createContext();var F=function(e){var t=Object(a.useState)({}),n=Object(i.a)(t,2),o=n[0],l=n[1],r=Object(a.useState)(!1),u=Object(i.a)(r,2),s=u[0],m=u[1],f=function(e){try{var t=B.a.verify(e,"dontlookatmeimhideous");d(!0,e,t)}catch(n){d(!1,null,{})}},d=function(e,t,n){y.a.save("auth",t),m(!0),l(n)},p={user:o,loggedIn:s,login:function(e,t){var n={Authorization:"Basic ".concat(btoa("".concat(e,":").concat(t)))};T.a.post("".concat("http://localhost:3001","/signin"),null,{headers:n}).then((function(e){return e.data})).then((function(e){console.log({user:e}),f(e.token)}))}};return console.log({state:p}),c.a.createElement(P.Provider,{value:p},e.children)};var L=function(e){var t=Object(a.useState)(""),n=Object(i.a)(t,2),o=n[0],l=n[1],r=Object(a.useState)(""),u=Object(i.a)(r,2),s=u[0],m=u[1],f=Object(a.useContext)(P);return c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),f.login(o,s)}},c.a.createElement("input",{type:"text",name:"username",placeholder:"username",onBlur:function(e){l(e.target.value)}}),c.a.createElement("input",{type:"password",name:"password",placeholder:"password",onBlur:function(e){m(e.target.value)}}),c.a.createElement("button",{type:"submit"},"Go!"))},M=(n(300),function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(D,null,c.a.createElement(F,null,c.a.createElement(g,null,c.a.createElement(r.a,{variant:"dark",expand:"lg",sticky:"top",className:"nav-color"},c.a.createElement(r.a.Brand,{href:"#home"},"Home"),c.a.createElement(D,null),c.a.createElement(L,null)),c.a.createElement(_,null)))))}),z=function(){return c.a.createElement(M,null)},J=document.getElementById("root");l.a.render(c.a.createElement(z,null),J)}},[[152,1,2]]]);
//# sourceMappingURL=main.c90c9760.chunk.js.map